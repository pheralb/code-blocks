---
title: "Getting Started"
description: "A beautifully code block component for React & MDX. Built with Shiki."
category: "MDX"
---

<Hero>

```ts
console.log("Hello world!");
```

</Hero>

## Getting started

1. Install the following dependencies:

```shell
# Dependencies:
pnpm i lucide-react @react-symbols/icons -E

# Dev Dependencies:
pnpm i @shikijs/rehype @types/mdx -E -D
```

2. Create a custom `shikiOptions` object. This configuration includes the [themes](https://shiki.style/themes#bundled-themes) and [transformers](https://shiki.style/packages/transformers#shikijs-transformers) that will be used in the component. You can customize this object according to your needs:

```ts
import type { RehypeShikiOptions } from "@shikijs/rehype";

export const shikiOptions: RehypeShikiOptions = {
  themes: {
    light: "github-light",
    dark: "github-dark",
  },
  transformers: [
    {
      name: "AddPreProperties",
      pre(node) {
        node.properties["data-language"] = this.options.lang || "plaintext";
        node.properties["data-code"] = this.source;
      },
    },
    {
      name: "WordWrap",
      pre(node) {
        node.properties["style"] = "white-space: pre-wrap;";
      },
    },
  ],
};
```

3. Use `@shikijs/rehype` in your MDX configuration as **rehype plugin**:

```ts
import { shikiOptions } from "./shikiOptions";
import { rehypeShiki } from "@shikijs/rehype";

const mdx = await compileMDX(context, document, {
  rehypePlugins: [[rehypeShiki, shikiOptions]],
});
```

4. Create a custom array with the languages and the icons that will be used in the component:

> ðŸ’¡ You can extend this array with all the languages you are going to use using the [React-Symbols](https://react-symbols.vercel.app/) components.

```ts
import { Js, Reactts, Reactjs, Shell, TypeScript } from "@react-symbols/icons";

const Languages = [
  {
    name: "bash",
    icon: Shell,
  },
  {
    name: "jsx",
    icon: Reactjs,
  },
  {
    name: "tsx",
    icon: Reactts,
  },
  {
    name: "ts",
    icon: TypeScript,
  },
  {
    name: "js",
    icon: Js,
  },
];
```

5. Finally, create a `codeblock-mdx.tsx` component with the following code:

<ComponentSource name="codeblock-mdx" />

## Usage

Create a custom `mdx-components.tsx` file with the following code:

```tsx
import type { MDXComponents } from "mdx/types";
import CodeblockMDX from "@/components/codeblock-mdx";

export const MDXCustomComponents: MDXComponents = {
  pre: (props) => <CodeblockMDX {...props} />,
  code: (props) => <code className="font-mono text-sm" {...props} />,
};
```

> ðŸ’¡ Example with [`Content-Collections`](https://www.content-collections.dev/):

```tsx
import { useMDXComponent } from "@content-collections/mdx/react";
import { MDXCustomComponents } from "@/mdx-components";

interface MDXComponentsProps {
  code: string;
}

export function MDX(props: MDXComponentsProps) {
  const Component = useMDXComponent(props.code);
  return <Component components={MDXCustomComponents} />;
}
```

## Light/Dark Mode

Following [Shiki's documentation about light/dark mode](https://shiki.style/guide/dual-themes#query-based-dark-mode), to add it, use this code in your global CSS file:

```css
html.light code[data-theme*=" "],
html.light code[data-theme*=" "] span,
html.light .shiki,
html.light .shiki span {
  color: var(--shiki-light);
  background-color: transparent;
}

html.dark code[data-theme*=" "],
html.dark code[data-theme*=" "] span,
html.dark .shiki,
html.dark .shiki span {
  color: var(--shiki-dark) !important;
  background-color: transparent !important;
}
```

> ðŸ˜¢ I don't like to add !important but I haven't found another way.
